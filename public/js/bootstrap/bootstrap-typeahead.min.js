!function(t){"use strict";var e=function(e,i){this.$element=t(e);this.options=t.extend({},t.fn.typeahead.defaults,i);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=t(this.options.menu);this.shown=false;this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(t)).change();return this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(e){var i;this.query=this.$element.val();if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}i=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source;return i?this.process(i):this},process:function(e){var i=this;e=t.grep(e,function(t){return i.matcher(t)});e=this.sorter(e);if(!e.length){return this.shown?this.hide():this}return this.render(e.slice(0,this.options.items)).show()},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){var e=[],i=[],s=[],n;while(n=t.shift()){if(!n.toLowerCase().indexOf(this.query.toLowerCase()))e.push(n);else if(~n.indexOf(this.query))i.push(n);else s.push(n)}return e.concat(i,s)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var i=this;e=t(e).map(function(e,s){e=t(i.options.item).attr("data-value",s);e.find("a").html(i.highlighter(s));return e[0]});e.first().addClass("active");this.$menu.html(e);return this},next:function(e){var i=this.$menu.find(".active").removeClass("active"),s=i.next();if(!s.length){s=t(this.$menu.find("li")[0])}s.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),i=e.prev();if(!i.length){i=this.$menu.find("li").last()}i.addClass("active")},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",t.proxy(this.keydown,this))}this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;if(!e){this.$element.setAttribute(t,"return;");e=typeof this.$element[t]==="function"}return e},move:function(t){if(!this.shown)return;switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault();this.prev();break;case 40:t.preventDefault();this.next();break}t.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]);this.move(e)},keypress:function(t){if(this.suppressKeyPressRepeat)return;this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation();t.preventDefault()},blur:function(t){var e=this;setTimeout(function(){e.hide()},150)},click:function(t){t.stopPropagation();t.preventDefault();this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active");t(e.currentTarget).addClass("active")}};var i=t.fn.typeahead;t.fn.typeahead=function(i){return this.each(function(){var s=t(this),n=s.data("typeahead"),r=typeof i=="object"&&i;if(!n)s.data("typeahead",n=new e(this,r));if(typeof i=="string")n[i]()})};t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};t.fn.typeahead.Constructor=e;t.fn.typeahead.noConflict=function(){t.fn.typeahead=i;return this};t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var i=t(this);if(i.data("typeahead"))return;e.preventDefault();i.typeahead(i.data())})}(window.jQuery);